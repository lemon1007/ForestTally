import{h as u,F as m,a as y,b as k,v as w,c as E}from"./index.a6d27080.js";import{bD as v,bE as o,bP as d,bw as p,bs as h,bT as F,bU as I}from"./vendor.3d1f4046.js";const T="_formItem_14btc_1",V="_button_14btc_1",j="_actions_14btc_5",x="_removeTagsAndItems_14btc_10",S="_tagEdit_wrapper_14btc_15",g={formItem:T,button:V,actions:j,removeTagsAndItems:x,tagEdit_wrapper:S},q=(e,c)=>{var n;throw((n=e.response)==null?void 0:n.status)===422&&c(e.response.data),e},B=v({props:{id:Number},setup:(e,c)=>{const n=F(),l=I();if(!n.query.kind)return()=>o("div",null,[d("\u53C2\u6570\u9519\u8BEF")]);const t=p({id:void 0,name:"",sign:"\u{1F600}",kind:n.query.kind.toString()}),a=p({}),b=async s=>{s.preventDefault();const r=[{key:"name",type:"required",message:"\u5FC5\u586B"},{key:"name",type:"pattern",regex:/^.{1,4}$/,message:"\u53EA\u80FD\u586B 1 \u5230 4 \u4E2A\u5B57\u7B26"},{key:"sign",type:"required",message:"\u5FC5\u586B"}];Object.assign(a,{name:[],sign:[]}),Object.assign(a,w(t,r)),E(a)||(await(await t.id?u.patch(`/tags/${t.id}`,t,{params:{_mock:"tagEdit"},_autoLoading:!0}):u.post("/tags",t,{params:{_mock:"tagCreate"},_autoLoading:!0})).catch(_=>q(_,f=>Object.assign(a,f.errors))),l.back())};return h(async()=>{if(!e.id)return;const s=await u.get(`/tags/${e.id}`,{_mock:"tagShow"});Object.assign(t,s.data.resource)}),()=>o(k,{onSubmit:b,class:g.total_wrapper},{default:()=>{var s,r;return[o(m,{label:"\u6807\u7B7E\u540D",type:"text",modelValue:t.name,"onUpdate:modelValue":i=>t.name=i,error:(s=a.name)==null?void 0:s[0]},null),o(m,{label:"\u7B26\u53F7 "+t.sign,type:"emojiSelect",modelValue:t.sign,"onUpdate:modelValue":i=>t.sign=i,error:(r=a.sign)==null?void 0:r[0]},null),o(m,null,{default:()=>[o(y,{type:"submit",class:[g.button]},{default:()=>[d("\u786E\u5B9A")]})]})]}})}});export{B as T,g as s};
